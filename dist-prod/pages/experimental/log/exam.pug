extends ../../bootstrap_base

block title
  -const mainContainer1400 = true;
  +includeCSS('/experimental/index.css')
  title è€ƒè¯•è®°å½•
  style.
    tbody tr th {
      max-width: 12rem;
    }
block content

  .container-fluid.max-width
    .row
      include ../nav
      if data.paper
        .col-xs-12.col-md-5
          .form-horizontal
            .form-group
              label.col-sm-5.control-label è€ƒå·IDï¼š
              h5.col-sm-7
                strong= data.paper._id
            .form-group
              label.col-sm-5.control-label å‘å·æ—¶é—´ï¼š
              h5.col-sm-7
                strong= data.paper.toc.toLocaleString()
            .form-group
              label.col-sm-5.control-label äº¤å·æ—¶é—´ï¼š
              h5.col-sm-7
                strong= data.paper.tlm.toLocaleString()
            .form-group
              label.col-sm-5.control-label ç”¨æˆ·ï¼š
              h5.col-sm-7
                a(href=`/u/${data.paper.user.uid}` target="_blank")
                  strong= data.paper.user.username
            .form-group
              label.col-sm-5.control-label è€ƒè¯•ç§‘ç›®
              h5.col-sm-7
                a(href=`/exam/categories/editor?cid=${data.paper.category._id}` target="_blank")
                  strong= data.paper.category.name
                span=` (${data.paper.category.volume})`
            .form-group
              label.col-sm-5.control-label åŠæ ¼åˆ†æ•°ï¼š
              h5.col-sm-7
                strong= data.paper.passScore
            .form-group
              label.col-sm-5.control-label è¯•å·å¾—åˆ†ï¼š
              h5.col-sm-7
                strong=data.paper.score
            .form-group
              label.col-sm-5.control-label çŠ¶æ€ï¼š
              h5.col-sm-7
                if data.paper.passed
                  strong.text-success é€šè¿‡
                else
                  strong.text-danger æœªé€šè¿‡
            .form-group
              label.col-sm-5.control-label IPï¼š
              h5.col-sm-7
                strong
                  a(href=ipUrl(data.paper.ip) target="_blank")=data.paper.ip
        .col-xs-12.col-md-7
          hr
          h3.m-b-2
            strong ç­”é¢˜å¡
            small &nbsp;ç»¿è‰²ä¸ºæ­£ç¡®ç­”æ¡ˆ
          -const an = ["A", "B", "C", "D"];
          for r , index in data.paper.record
            if !r.question
              h5=`${index+1}ã€å¤ªä¹…è¿œï¼Œæœªå¯¼å…¥ğŸ˜­`
            else
              div.m-b-5
                h4
                  strong!=markdown(`${index+1}ã€` + r.question.content)
                  if r.question.hasImage
                    div
                      img(src=`/exam/question/${r.question._id}/image` style="max-width: 100%;")
                if r.question.answer.length === 1
                  h5 ç­”æ¡ˆï¼š
                    span.text-success=r.question.answer[0]
                //-h5 åŸç­”æ¡ˆé¡ºåºï¼š
                  for a, index in r.question.answer
                    h5
                      span=an[index] + "ã€"
                      if index === 0
                        span.text-success= a
                      else
                        span.text-danger= a
                if r.answerIndex
                  h5 è¯•å·ç­”æ¡ˆé¡ºåºï¼š
                    for i, index in r.answerIndex
                      h5
                        span=an[index] + "ã€"
                        if i === 0
                          span.text-success=r.question.answer[i]
                        else
                          span.text-danger=r.question.answer[i]
                        if index === r.answer
                          strong ã€è¢«é€‰ç­”æ¡ˆã€‘
                else
                  span=`ç”¨æˆ·ä½œç­”ï¼š${r.answer}`




      else
        .col-xs-12.col-md-12
          h4.m-b-1 æŒ‰æ¡ä»¶æŸ¥è¯¢è®°å½•
          #data.hidden=JSON.stringify({t: data.t, content: data.content})
          .form-inline(style='margin-bottom: 1rem;' v-cloak)#app
            .form-group
              select.form-control(v-model='t')
                option(value='username') ç”¨æˆ·å
                option(value='uid') UID
                option(value='ip') IP
            .form-group
              input.form-control(placeholder='è¯·è¾“å…¥å†…å®¹' v-model='content' @keyup.enter='search')
            .form-group
              button.btn.btn-primary(type='submit' @click='search') æœç´¢
              span &nbsp;
              a.btn.btn-default(type='submit' href='/e/log/exam') å…¨éƒ¨
            h5.text-danger= data.info
        .col-xs-12.col-md-12
          include ../../interface_navigation_paging
          table.table
            thead
              tr
                th æ—¶é—´
                th ç”¨æˆ·
                th ç§‘ç›®
                th é¢˜ç›®ç±»å‹
                th çŠ¶æ€
                th åŠæ ¼åˆ†æ•°
                th å¾—åˆ†
                th IP
                th ç­”é¢˜å¡
            tbody
              for paper in data.papers
                tr
                  th=paper.toc.toLocaleString()
                  th
                    a(href=`/u/${paper.uid}` target="_blank")=paper.user.username || paper.user.uid
                  th=paper.category.name
                  th=paper.category.volume
                  th
                    if paper.passed
                      .text-success é€šè¿‡
                    else
                      .text-danger æœªé€šè¿‡
                  th=paper.passScore
                  th=paper.score
                  th
                    a(href=ipUrl(paper.ip) target="_blank")=paper.ip
                  th
                    a(href=`/e/log/exam?t=paper&content=${paper._id}` target="_blank") æŸ¥çœ‹
          include ../../interface_navigation_paging
block scripts
  +includeJS("/experimental/log/exam.js")
  include ../../MathJax