<template>
  <div class="tiptap-editor-container">
    <editor-content :editor="editor" />
    <button @click="getJSON">GET JSON</button>
  </div>
</template>

<script>
import { Editor, EditorContent } from '@tiptap/vue-2'
import StarterKit from '@tiptap/starter-kit'
import nkcEmoji from './node/nkcEmoji/nkcEmoji.js'
import nkcSticker from './node/nkcSticker/nkcSticker.js'
import nkcPictureBlock from './node/nkcPictureBlock/nkcPictureBlock.js'
import nkcPictureInline from './node/nkcPictureInline/nkcPictureInline.js'
import nkcPictureFloat from './node/nkcPictureFloat/nkcPictureFloat.js'



export default {
  components: {
    EditorContent,
  },

  data() {
    return {
      editor: null,
    }
  },

  mounted() {
    this.editor = new Editor({
      content: `
        <p>Iâ€™m running Tiptap with Vue.js. ğŸ‰</p>
        <p>
          å•Šå•Šå•Šå•Šå•Šå•Šå•Š
          <nkc-emoji unicode="1f602"></nkc-emoji>
          å•Šå•Šå•Šå•Šå•Šå•Š
          <nkc-sticker id="308179"></nkc-sticker>
          å•Šå•Šå•Šå•Šå•Šå•Š
          <nkc-sticker id="360353"></nkc-sticker>
          å•Šå•Šå•Šå•Šå•Šå•Š
          é™¤äº†è·å¾—è¯¥å¥–é¡¹æ‰€å¸¦æ¥çš„<nkc-picture-inline id="360355"></nkc-picture-inline>å…¨çƒå£°æœ›ä¹‹å¤–ï¼Œè¯ºè´å°”åŒ–å­¦å¥–è¿˜é™„å¸¦ 1100 ä¸‡ç‘å…¸å…‹æœ—ï¼ˆ100 ä¸‡ç¾å…ƒï¼‰çš„ç°é‡‘å¥–åŠ±ï¼Œå…¶ä¸­ä¸€åŠå°†å½’ David Baker æ‰€æœ‰ï¼Œå¦ä¸€åŠç”± Hassabis å’Œ Jumper å¹³åˆ†ã€‚
          AAAAAAAAAA
        </p>
        <nkc-picture-block id="360354" desc="é£æ™¯ä¼˜ç¾"></nkc-picture-block>
        <p>è¿™æ˜¯æœ«å°¾çš„å†…å®¹</p>
        <nkc-picture-float id="360356" float="left" ><p>234234</p></nkc-picture-float>

`,

      extensions: [StarterKit, nkcEmoji, nkcSticker, nkcPictureBlock, nkcPictureInline, nkcPictureFloat],
    })
  },

  methods: {
    getJSON() {
      const json = this.editor.getJSON();
      console.log(json);
    }
  },

  beforeDestroy() {
    this.editor.destroy()
  },
}
</script>

<style scoped lang="less">
.tiptap-editor-container{
  ::v-deep{
    p {
      font-size: 15px;
    }
  }
}
</style>
