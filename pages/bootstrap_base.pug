extends scratch.pug
block head

  meta(charset='UTF-8')
  meta(http-equiv="X-UA-Compatible" content="IE=edge,chrome=1")
  meta(name="viewport" content="width=device-width, initial-scale=1")
  meta(name="format-detection" content="telephone=no")
  meta(name="google-site-verification" content="daD64Dm9iV1usCNqLOqzBdBP_wqJYXNBr3ACy979VwY")
  if state.isApp && state.platform === 'reactNative'
    meta(name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")
  link(rel='shortcut icon' href='/favicon.ico')
  if state.isApp && state.platform === 'apiCloud'
    +includeJS("/appAPi/api.js")
  +includeCSS('/bootstrap/css/bootstrap.css')
  //- å­—ä½“å›¾æ ‡ http://www.fontawesome.com.cn/icons-ui/
  +includeCSS('/font-awesome/css/font-awesome.css')
  +includeCSS('/nkc_styles.css')
  if state.isApp
    style.
      body{
        padding-top: 0;
      }
  +includeCSS('/publicModules/public.css')
  block title
    meta(name="description" content="å€¡å¯¼ç§‘å­¦ç†æ€§ï¼Œå‘å±•ç§‘æŠ€çˆ±å¥½")
    title bootstrap_base

block body
  block navbar
    div
      if !state.isApp
        include ./publicModules/navbar/navbar.pug

  block content
    h1 hello world!
  if !state.isApp
    block footer
      include ./publicModules/footer/footer
  if data.user
    if data.user.generalSettings.lotterySettings.status
      include module_lottery
    -const {systemInfo, reminder, usersMessage} = data.user.generalSettings.messageSettings.beep;
    audio.hidde#beep(data-notice=`${systemInfo}`, data-reminder=`${reminder}`, data-message=`${usersMessage}`)
  +includeJS('/jquery/jquery-1.11.1.js')
  +includeJS('/jquery/jquery-ui.1.11.4.min.js')
  //- æ–°ç‰ˆcommon.js
  +includeJS('/publicModules/common.js')
  //-appä½¿ç”¨çš„js
  if state.isApp
    script!=`NKC.configs.isApp = true;NKC.configs.appOS="${state.appOS}";NKC.configs.platform="${state.platform}"`
    if state.platform === 'apiCloud'
      +includeJS("/appAPi/app.js")
  +includeJS('/bootstrap/js/bootstrap.min.js')
  +includeJS('/twemoji/2/twemoji.min.js')
  +includeJS('/Promise/promise.min.js')
  +includeJS('/external_pkgs/polyfill/dist/polyfill.min.js')
  +includeJS('/vue/dist/vue.js')
  if NODE_ENV === "production"
    script.
      Vue.config.productionTip = false;
  //- å¼¹çª—æ¨¡å—
  +includeJS("/sweetalert2/dist/sweetalert2.all.min.js")
  +includeJS('/tools.js')
  // å‰åç«¯å…¬ç”¨ æ•°æ®ç±»å‹æ£€æŸ¥
  +includeJS("/checkData.js")
  //- æ—§ç‰ˆcommon.jså…¼å®¹æ—§çš„é¡µé¢
  +includeJS('/interface_common.js')
  if data.user
    script!=`NKC.configs.uid="${data.user.uid}";`
    script!=`NKC.configs.selectTypesWhenSubscribe=!!${data.user.generalSettings.subscribeSettings.selectTypesWhenSubscribe};`
    if !state.isApp
      //- æ¥å…¥å³æ—¶é€šä¿¡
      +includeJS('/socket.io-client/dist/socket.io.js')
      +includeJS('/message/socket.js')

    //- æ–°å¢å¥½è¯„
    if data.user.newVoteUp > 0
      script!=`sweetAlert("ä½ å‘è¡¨çš„å†…å®¹æ–°å¢äº† ${data.user.newVoteUp} ä¸ªå¥½è¯„ğŸ‘ï¼")`
    // å› ç²¾é€‰è€Œè·å¾—çš„ç§‘åˆ›å¸
    -let kcb = data.user.generalSettings.draftFeeSettings.kcb;
    if kcb > 0
      script!=`sweetAlert("ä½ å‘è¡¨çš„å†…å®¹è¢«è¯„ä¸ºç²¾é€‰ï¼Œå…±è·å¾— ${kcb/100} ä¸ªç§‘åˆ›å¸ï¼")`

  if (!state.isApp || state.platform === 'reactNative') && !data.user
    include ./publicModules/login/login
  if state.isApp && state.platform === 'reactNative'
    +includeJS('/appApi/reactNative.js')
  block scripts
  if !state.isApp
    //- ç”ŸæˆäºŒç»´ç  é¡µè„š
    include ./publicModules/qrcode/qrcode
    script.
      console.log('(c)2019 æˆéƒ½ç§‘åˆ›ç§‘å­¦æ–‡åŒ–ç ”ç©¶é™¢')
      console.log('Project Repository: https://github.com/kccd/nkc')
  if state.isApp && state.platform === 'reactNative'
    script.
      document.body.style.userSelect = window._userSelect || 'none';
